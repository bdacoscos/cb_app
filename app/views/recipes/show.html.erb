<div class="container">
  <h1>Single Recipe</h1>

  <%= link_to "Edit Recipe", edit_recipe_path %>

  <div>
    <%= image_tag @recipe.image.url, class: "max-width" %>
  </div>

  <h3>Like this recipe!</h3>
  <% like = Like.find_by(user: current_user, recipe: @recipe) %>
  <% if like %>
    <%= link_to like_path(like), method: :delete do%>
      <i class="material-icons">favorite</i>
    <% end %>
  <% else %>
    <%= link_to recipe_likes_path(@recipe), method: :post do %>
      <i class="material-icons">favorite_border</i>
    <% end %>
  <% end %>


  <div class="row"> 
    <div class="col s2">
      <h3>Ingredients</h3>
      <%= @recipe.ingredients %>
    </div>
  </div>

  <div class="row">
    <div class="col s8">
      <h3><%= @recipe.name %></h3>
    </div>
    <div class="col s8">
      <h3>About Recipe</h3>
      <%= @recipe.description %>
    </div>
    <div class="col s8">
      <h3>Instructions</h3>
      <%= @recipe.instructions %>
    </div>
  </div>

  <div class="row">
    <div class="col s2">
      <h3>Comments</h3>

      <%= form_for [@recipe, @comment] do |c| %>
        <% if @comment.errors.any? %>
          <div class="error_messages">
            <h2>Form is invalid</h2>
            <ul>
              <% for message in @comment.errors.full_messages %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>
          <div class="field">
            <%= c.label :content %>
            <%= c.text_field :content%>
          </div>
          <button class="btn waves-effect waves-light validate" type="submit" name="action">Submit<i class="material-icons right">send</i>
          </button>
      <% end %>



      <% @recipe.comments.each do |comment| %>
        <% comment = Comment.find_by(user: current_user, recipe: @recipe) %>
        <%= link_to "Delete comment", comment_path(comment), method: :delete %>  
        <div><%= image_tag current_user.image.url(:thumb) %></div>
        <%= current_user.name %>
        <%= comment.created_at.strftime("%m/%d/%y") %>
        <div><%= comment.content %></div>
      <% end %>
    </div>

  </div>
</div>